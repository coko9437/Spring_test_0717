<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ë¶€ì‚° ëª¨ë²”ìŒì‹ì  ì •ë³´</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        #result ul { list-style: none; padding: 0; }
        #result li { margin-bottom: 10px; border-bottom: 1px solid #ccc; padding: 10px 0; }
        button { padding: 10px 20px; }
    </style>
</head>
<body>
<h2>ğŸ“ ë¶€ì‚° ëª¨ë²”ìŒì‹ì  ë¦¬ìŠ¤íŠ¸</h2>
<button id="loadBtn">ë¶ˆëŸ¬ì˜¤ê¸°</button>
<a href="/api/public-data" target="_blank">ë§›ì§‘ ë°ì´í„° ë³´ê¸°</a>
<div id="result"><ul id="dataList"></ul></div>


<script>
    document.getElementById('loadBtn').addEventListener('click', () => {
        fetch('/api/publicdata?pageNo=1&numOfRows=10')
            .then(res => {
                if (!res.ok) throw new Error('ì„œë²„ ì˜¤ë¥˜');
                return res.json();
            })
            .then(data => {
                const list = document.getElementById('dataList');
                list.innerHTML = ''; // ì´ˆê¸°í™”

                if (data.length === 0) {
                    list.innerHTML = '<li>ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</li>';
                    return;
                }

                data.forEach(item => {
                    const li = document.createElement('li');
                    li.innerHTML = `
                            <strong>${item.bsnsNm}</strong><br/>
                            ì£¼ì†Œ: ${item.addrRoad || item.addrJibun}<br/>
                            ì „í™”ë²ˆí˜¸: ${item.tel || 'ì—†ìŒ'}<br/>
                            ì—…ì¢…: ${item.bsnsSector || 'ì •ë³´ ì—†ìŒ'}
                        `;
                    list.appendChild(li);
                });
            })
            .catch(err => {
                alert('ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨: ' + err.message);
            });
    });
</script>
</body>
</html>